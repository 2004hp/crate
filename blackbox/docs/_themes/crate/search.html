{%- extends "layout.html" %}
{% set title = _('Search') %}
{% set script_files = script_files + ['_static/searchtools.js'] %}
{% block extrahead %}
  <!--
  ~ Licensed to Crate.io Inc. (Crate) under one or more contributor license
  ~ agreements.  See the NOTICE file distributed with this work for additional
  ~ information regarding copyright ownership.  Crate licenses this file to
  ~ you under the Apache License, Version 2.0 (the "License");  you may not
  ~ use this file except in compliance with the License.  You may obtain a
  ~ copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  ~ WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
  ~ License for the specific language governing permissions and limitations
  ~ under the License.
  ~
  ~ However, to use any modules in this file marked as "Enterprise Features",
  ~ Crate must have given you permission to enable and use such Enterprise
  ~ Features and you must have a valid Enterprise or Subscription Agreement
  ~ with Crate.  If you enable or use the Enterprise Features, you represent
  ~ and warrant that you have a valid Enterprise or Subscription Agreement
  ~ with Crate.  Your use of the Enterprise Features if governed by the terms
  ~ and conditions of your Enterprise or Subscription Agreement with Crate.
  -->

<script type="text/javascript">
    jQuery(function() { Search.loadIndex("{{ pathto('searchindex.js', 1) }}"); });
  </script>
  {# this is used when loading the search index using $.ajax fails,
     such as on Chrome for documents on localhost #}
  <script type="text/javascript" id="searchindexloader"></script>
  {{ super() }}
{% endblock %}
{% block body %}
  <h1 id="search-documentation">{{ _('Search') }}</h1>
  <div id="fallback" class="admonition warning">
  <script type="text/javascript">$('#fallback').hide();</script>
  <p>
    {% trans %}Please activate JavaScript to enable the search
    functionality.{% endtrans %}
  </p>
  </div>
  <p>
    {% trans %}From here you can search these documents. Enter your search
    words into the box below and click "search". Note that the search
    function will automatically search for all of the words. Pages
    containing fewer words won't appear in the result list.{% endtrans %}
  </p>
  <form class="form-search" action="" method="get">
    <input type="text" name="q" value="" />
    <button type="submit" class="btn" >{{ _('search') }}</button>
    <span id="search-progress" style="padding-left: 10px"></span>
  </form>
  {% if search_performed %}
    <h2>{{ _('Search Results') }}</h2>
    {% if not search_results %}
      <p>{{ _('Your search did not match any documents. Please make sure that all words are spelled correctly and that you\'ve selected enough categories.') }}</p>
    {% endif %}
  {% endif %}
  <div id="search-results">
  {% if search_results %}
    <ul>
    {% for href, caption, context in search_results %}
      <li><a href="{{ pathto(item.href) }}">{{ caption }}</a>
        <div class="context">{{ context|e }}</div>
      </li>
    {% endfor %}
    </ul>
  {% endif %}
  </div>
{% endblock %}
