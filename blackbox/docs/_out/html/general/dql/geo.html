<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Geo Search &mdash; CrateDB  documentation</title>
    
    <link rel="stylesheet" href="../../_static/basic.css?ver=1.1" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css?ver=1.1" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/normalize.css?ver=1.1" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/bootstrap.css?ver=1.1" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/mmenu.all.css?ver=1.1" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/components.css?ver=1.1" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/crateio.css?ver=1.1" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/crateio-rtd.css?ver=1.1" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css?ver=1.1" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!--[if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif]-->
    <script type="text/javascript" src="https://cdn.crate.io/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script type="text/javascript" src="../../_static/js/modernizr.js?ver=1.1"></script>
    <script type="text/javascript" src="../../_static/js/underscore.min.js?ver=1.1"></script>
    <script type="text/javascript" src="../../_static/doctools.js?ver=1.1"></script>
    <script type="text/javascript" src="../../_static/js/searchtools.js?ver=1.1"></script>
    <script type="text/javascript" src="../../_static/js/webflow.js?ver=1.1"></script>
    <script type="text/javascript" src="../../_static/js/bootstrap.js?ver=1.1"></script>
    <script type="text/javascript" src="../../_static/js/mmenu.all.min.js?ver=1.1"></script>
    <script type="text/javascript" src="../../_static/js/fontawesome.js?ver=1.1"></script>
    <script type="text/javascript" src="../../_static/js/custom.js?ver=1.1"></script>
    <link rel="top" title="CrateDB  documentation" href="../../index.html" />
    <link rel="up" title="Querying Crate" href="index.html" />
    <link rel="next" title="Built-in Functions and Operators" href="../builtins/index.html" />
    <link rel="prev" title="Fulltext Search" href="fulltext.html" />
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
  <meta name="apple-mobile-web-app-capable" content="yes">
  
  </head>
  <body>
  <header class="header-nav">
  <div class="container">
    <div class="navbar w-nav" data-animation="default" data-collapse="small" data-contain="1" data-duration="400">
      <a class="brand w-nav-brand" href="https://crate.io">
        <img src="../../_static/images/logo-crate.png" width="217">
      </a>
      <nav class="w-nav-menu main-nav" role="navigation">
        <div class="dropdownBackground">
          <span class="arrow"></span>
        </div>
        <ul id="menu-top-navigation" class="menu">
          <li class="navlink w-nav-link menu-item"><a href="https://crate.io/overview/">CrateDB</a></li>
          <li class="navlink w-nav-link menu-item menu-item-has-children"><a href="https://crate.io/cratedb-solutions/">Use Cases</a>
            <ul class="sub-menu">
              <li class="menu-item"><a href="https://crate.io/customers/">Customers</a></li>
              <li class="menu-item"><a href="https://crate.io/iot-sensor-solutions/">IoT &amp; Sensor Data</a></li>
              <li class="menu-item"><a href="https://crate.io/geospatial-analytics/">Geospatial Analytics</a></li>
              <li class="menu-item"><a href="https://crate.io/cyber-security/">Cyber Security</a></li>
              <li class="menu-item"><a href="https://crate.io/time-series/">Time Series</a></li>
            </ul>
          </li>
          <li class="navlink w-nav-link menu-item"><a href="https://crate.io/pricing/">Pricing</a></li>
          <li class="navlink w-nav-link menu-item menu-item-has-children"><a>Resources</a>
            <ul class="sub-menu">
              <li class="menu-item"><a href="https://crate.io/docs/">Documentation</a></li>
              <li class="menu-item"><a href="https://crate.io/resources/">Resource Library</a></li>
              <li class="menu-item"><a href="https://crate.io/blog/">Blog</a></li>
              <li class="menu-item"><a href="https://crate.io/community/">Community</a></li>
            </ul>
          </li>
          <li class="btn-link w-nav-link menu-item"><a href="https://crate.io/download/">Download</a></li>
        </ul>
      </nav>

      <div id="mobile-nav" class="mm-menu">
        <ul class="offcanvas-menu">
          <li class="navlink w-nav-link menu-item"><a href="https://crate.io/overview/">CrateDB</a></li>
          <li class="navlink w-nav-link menu-item menu-item-has-children"><a href="https://crate.io/cratedb-solutions/">Use Cases</a>
            <ul class="sub-menu">
              <li class="menu-item"><a href="https://crate.io/customers/">Customers</a></li>
              <li class="menu-item"><a href="https://crate.io/iot-sensor-solutions/">IoT &amp; Sensor Data</a></li>
              <li class="menu-item"><a href="https://crate.io/geospatial-analytics/">Geospatial Analytics</a></li>
              <li class="menu-item"><a href="https://crate.io/cyber-security/">Cyber Security</a></li>
              <li class="menu-item"><a href="https://crate.io/time-series/">Time Series</a></li>
            </ul>
          </li>
          <li class="navlink w-nav-link menu-item"><a href="https://crate.io/pricing/">Pricing</a></li>
          <li class="navlink w-nav-link menu-item menu-item-has-children"><a>Resources</a>
            <ul class="sub-menu">
              <li class="menu-item"><a href="https://crate.io/docs/">Documentation</a></li>
              <li class="menu-item"><a href="https://crate.io/resources/">Resource Library</a></li>
              <li class="menu-item"><a href="https://crate.io/blog/">Blog</a></li>
              <li class="menu-item"><a href="https://crate.io/community/">Community</a></li>
            </ul>
          </li>
          <li class="btn-link w-nav-link menu-item"><a href="https://crate.io/download/">Download</a></li>
        </ul>
      </div>

      <a href="#mobile-nav" class="fa fa-bars mobile-nav-button"></a>
    </div>
  </div>
</header>

  <div class="w-section section border-top">
    <div class="w-container w-hidden-main margin-bottom-32">
      <div class="section" style="margin: 0px">
        <a href="#" id="mobile-menu-toggler" class="w-button">Toggle Doc Menu</a>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-md-4 col-lg-3">
          <aside class="wrapper-navleft"><div role="complementary" class="bs-docs-sidebar hidden-print" id="nav-affix">
  <div class="search-link">
    <a href="../../search.html" class="btn btn-primary">Search Documentation</a>
  </div>
  <ul class="bs-docs-sidenav bs-sidenav nav" role="complementary">

    

    
      <ul class="toctree nav nav-list">
  <li class="navleft-item">CrateDB</li>
  <ul>
    
    <li class="navleft-item"><a href="/docs/crate/getting-started/">Getting Started</a></li>
    
    
    <li class="current">
      <a class="current-active" href="../../index.html" title="CrateDB">Reference</a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../run.html">Running CrateDB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../run.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../run.html#command-line-options">Command Line Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../run.html#signal-handling">Signal Handling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../config/index.html">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../config/node.html">Node Specific Settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../config/node.html#basics">Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/node.html#node-types">Node Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/node.html#read-only-node">Read-only node</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/node.html#hosts">Hosts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/node.html#ports">Ports</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/node.html#paths">Paths</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/node.html#plugins">Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/node.html#memory">Memory</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/node.html#garbage-collection">Garbage Collection</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/node.html#elasticsearch-http-rest-api">Elasticsearch HTTP REST API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/node.html#cross-origin-resource-sharing-cors">Cross-Origin Resource Sharing (CORS)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/node.html#blobs">Blobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/node.html#repositories">Repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/node.html#queries">Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/node.html#custom-attributes">Custom Attributes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../config/cluster.html">Cluster Wide Settings</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../config/cluster.html#non-runtime-cluster-wide-settings">Non-Runtime Cluster Wide Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/cluster.html#collecting-stats">Collecting Stats</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/cluster.html#usage-data-collector">Usage Data Collector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/cluster.html#graceful-stop">Graceful Stop</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/cluster.html#bulk-operations">Bulk Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/cluster.html#discovery">Discovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/cluster.html#routing-allocation">Routing Allocation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/cluster.html#recovery">Recovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/cluster.html#store-level-throttling">Store Level Throttling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/cluster.html#query-circuit-breaker">Query Circuit Breaker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/cluster.html#field-data-circuit-breaker">Field Data Circuit Breaker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/cluster.html#request-circuit-breaker">Request Circuit Breaker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/cluster.html#thread-pools">Thread Pools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/cluster.html#metadata">Metadata</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../config/session.html">Session Setting Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../config/logging.html">Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../config/logging.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/logging.html#settings">Settings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../config/environment.html">Environment Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../config/environment.html#crate-home"><code class="docutils literal"><span class="pre">CRATE_HOME</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/environment.html#crate-java-opts"><code class="docutils literal"><span class="pre">CRATE_JAVA_OPTS</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/environment.html#crate-heap-size"><code class="docutils literal"><span class="pre">CRATE_HEAP_SIZE</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../config/system.html">Operating System Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../config/system.html#virtual-memory">Virtual Memory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../config/enterprise.html">Enterprise Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../config/enterprise.html#enterprise-license">Enterprise License</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/enterprise.html#javascript-language">Javascript Language</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/enterprise.html#authentication">Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../config/enterprise.html#secured-communications-ssl-tls">Secured Communications (SSL/TLS)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">General Use</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../ddl/index.html">Data Definition</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../ddl/create-table.html">Creating Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ddl/data-types.html">Data Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ddl/system-columns.html">System Columns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ddl/generated-columns.html">Generated Columns</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ddl/constraints.html">Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ddl/storage.html">Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ddl/partitioned-tables.html">Partitioned Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ddl/sharding.html">Sharding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ddl/replication.html">Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ddl/column-policy.html">Column Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ddl/fulltext-indices.html">Fulltext Indices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ddl/analyzers.html">Fulltext Analyzers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ddl/show-create-table.html">Show Create Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ddl/alter-table.html">Altering Tables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dml.html">Data Manipulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../dml.html#inserting-data">Inserting Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dml.html#updating-data">Updating Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dml.html#deleting-data">Deleting Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dml.html#import-and-export">Import and Export</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Querying Crate</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="selects.html">Selecting Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="joins.html">Joins</a></li>
<li class="toctree-l3"><a class="reference internal" href="union.html">Union All</a></li>
<li class="toctree-l3"><a class="reference internal" href="refresh.html">Refresh</a></li>
<li class="toctree-l3"><a class="reference internal" href="fulltext.html">Fulltext Search</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Geo Search</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../builtins/index.html">Built-in Functions and Operators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../builtins/scalar.html">Scalar Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../builtins/aggregation.html">Aggregation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../builtins/arithmetic.html">Arithmetic Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../builtins/table-functions.html">Table Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../builtins/operators.html">Comparison Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../builtins/array-comparisons.html">Array Comparisons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../builtins/subquery-expressions.html">Subquery Expressions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../user-defined-functions.html">User-Defined Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../user-defined-functions.html#create-or-replace"><code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">OR</span> <span class="pre">REPLACE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-defined-functions.html#supported-types">Supported Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-defined-functions.html#overloading">Overloading</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-defined-functions.html#determinism">Determinism</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-defined-functions.html#drop-function"><code class="docutils literal"><span class="pre">DROP</span> <span class="pre">FUNCTION</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../user-defined-functions.html#supported-languages">Supported Languages</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../blobs.html">Blobs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../blobs.html#creating-a-table-for-blobs">Creating a Table for Blobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../blobs.html#custom-location-for-storing-blob-data">Custom Location for Storing Blob Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="../blobs.html#list">List</a></li>
<li class="toctree-l3"><a class="reference internal" href="../blobs.html#altering-a-blob-table">Altering a Blob Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../blobs.html#deleting-a-blob-table">Deleting a Blob Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../blobs.html#using-blob-tables">Using Blob Tables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../occ.html">Optimistic Concurrency Control</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../occ.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../occ.html#optimistic-update">Optimistic Update</a></li>
<li class="toctree-l3"><a class="reference internal" href="../occ.html#optimistic-delete">Optimistic Delete</a></li>
<li class="toctree-l3"><a class="reference internal" href="../occ.html#known-limitations">Known Limitations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../information-schema.html">Information Schema</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../information-schema.html#access">Access</a></li>
<li class="toctree-l3"><a class="reference internal" href="../information-schema.html#virtual-tables">Virtual Tables</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../admin/index.html">Administration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../admin/system-information.html">System Information</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../admin/system-information.html#cluster">Cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/system-information.html#nodes">Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/system-information.html#node-checks">Node Checks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/system-information.html#shards">Shards</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/system-information.html#jobs-operations-and-logs">Jobs, Operations, and Logs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/system-information.html#cluster-checks">Cluster Checks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/system-information.html#repositories">Repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/system-information.html#snapshots">Snapshots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/system-information.html#summits">Summits</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/system-information.html#users">Users</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/system-information.html#allocations">Allocations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/system-information.html#shard-table-permissions">Shard Table Permissions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/runtime-config.html">Runtime Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/user-management.html">User Management</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../admin/user-management.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/user-management.html#create-user"><code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">USER</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/user-management.html#alter-user"><code class="docutils literal"><span class="pre">ALTER</span> <span class="pre">USER</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/user-management.html#drop-user"><code class="docutils literal"><span class="pre">DROP</span> <span class="pre">USER</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/user-management.html#list-users">List Users</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/privileges.html">Privileges</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../admin/privileges.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/privileges.html#privilege-types">Privilege Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/privileges.html#hierarchical-inheritance-of-privileges">Hierarchical Inheritance of Privileges</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/privileges.html#behavior-of-grant-deny-and-revoke">Behavior of <code class="docutils literal"><span class="pre">GRANT</span></code>, <code class="docutils literal"><span class="pre">DENY</span></code> and <code class="docutils literal"><span class="pre">REVOKE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/privileges.html#list-privileges">List Privileges</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/auth/index.html">Authentication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../admin/auth/methods.html">Authentication Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/auth/hba.html">Host Based Authentication (HBA)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/ssl.html">Secured Communications (SSL/TLS)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../admin/ssl.html#ssl-tls-configuration">SSL/TLS Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/ssl.html#setting-up-a-keystore-truststore-with-a-certificate-chain">Setting up a Keystore/Truststore With a Certificate Chain</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/ingestion/index.html">Ingestion Framework</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../admin/ingestion/sources/index.html">Ingestion Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/ingestion/rules.html">Ingestion Rules</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/optimization.html">Optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../admin/optimization.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/optimization.html#multiple-table-optimization">Multiple Table Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/optimization.html#partition-optimization">Partition Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/optimization.html#segments-upgrade">Segments Upgrade</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/jobs-management.html">Jobs Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/monitoring.html">JMX Monitoring</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../admin/monitoring.html#setup">Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/monitoring.html#using-docker">Using Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/monitoring.html#jmx-beans">JMX Beans</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/snapshots.html">Snapshots</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../admin/snapshots.html#snapshot">Snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/snapshots.html#restore">Restore</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/snapshots.html#cleanup">Cleanup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/snapshots.html#requirements-for-using-hdfs-repositories">Requirements for Using HDFS Repositories</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/discovery.html">Cloud Discovery</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../admin/discovery.html#amazon-ec2-discovery">Amazon EC2 Discovery</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/discovery.html#microsoft-azure-discovery">Microsoft Azure Discovery</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../admin/udc.html">Usage Data Collector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../admin/udc.html#technical-information">Technical Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/udc.html#admin-ui-tracking">Admin UI Tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/udc.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../admin/udc.html#how-to-disable-udc">How to Disable UDC</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../sql/index.html">SQL Syntax</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../sql/general/index.html">General SQL</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../sql/general/constraints.html">Constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/general/value-expressions.html">Value Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/general/lexical-structure.html">Lexical Structure</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../sql/statements/index.html">SQL Statements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/alter-cluster.html"><code class="docutils literal"><span class="pre">ALTER</span> <span class="pre">CLUSTER</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/alter-table.html"><code class="docutils literal"><span class="pre">ALTER</span> <span class="pre">TABLE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/alter-user.html"><code class="docutils literal"><span class="pre">ALTER</span> <span class="pre">USER</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/copy-from.html"><code class="docutils literal"><span class="pre">COPY</span> <span class="pre">FROM</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/copy-to.html"><code class="docutils literal"><span class="pre">COPY</span> <span class="pre">TO</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/create-analyzer.html"><code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">ANALYZER</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/create-blob-table.html"><code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">BLOB</span> <span class="pre">TABLE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/create-function.html"><code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">FUNCTION</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/create-ingest-rule.html"><code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">INGEST</span> <span class="pre">RULE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/create-repository.html"><code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">REPOSITORY</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/create-snapshot.html"><code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">SNAPSHOT</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/create-table.html"><code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/create-user.html"><code class="docutils literal"><span class="pre">CREATE</span> <span class="pre">USER</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/delete.html"><code class="docutils literal"><span class="pre">DELETE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/deny.html"><code class="docutils literal"><span class="pre">DENY</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/drop-function.html"><code class="docutils literal"><span class="pre">DROP</span> <span class="pre">FUNCTION</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/drop-ingest-rule.html"><code class="docutils literal"><span class="pre">DROP</span> <span class="pre">INGEST</span> <span class="pre">RULE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/drop-repository.html"><code class="docutils literal"><span class="pre">DROP</span> <span class="pre">REPOSITORY</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/drop-snapshot.html"><code class="docutils literal"><span class="pre">DROP</span> <span class="pre">SNAPSHOT</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/drop-table.html"><code class="docutils literal"><span class="pre">DROP</span> <span class="pre">TABLE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/drop-user.html"><code class="docutils literal"><span class="pre">DROP</span> <span class="pre">USER</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/explain.html"><code class="docutils literal"><span class="pre">EXPLAIN</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/grant.html"><code class="docutils literal"><span class="pre">GRANT</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/insert.html"><code class="docutils literal"><span class="pre">INSERT</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/kill.html"><code class="docutils literal"><span class="pre">KILL</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/optimize.html"><code class="docutils literal"><span class="pre">OPTIMIZE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/refresh.html"><code class="docutils literal"><span class="pre">REFRESH</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/restore-snapshot.html"><code class="docutils literal"><span class="pre">RESTORE</span> <span class="pre">SNAPSHOT</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/revoke.html"><code class="docutils literal"><span class="pre">REVOKE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/select.html"><code class="docutils literal"><span class="pre">SELECT</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/set.html"><code class="docutils literal"><span class="pre">SET</span></code> and <code class="docutils literal"><span class="pre">RESET</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/set-transaction.html"><code class="docutils literal"><span class="pre">SET</span> <span class="pre">TRANSACTION</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/show-columns.html"><code class="docutils literal"><span class="pre">SHOW</span> <span class="pre">COLUMNS</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/show-create-table.html"><code class="docutils literal"><span class="pre">SHOW</span> <span class="pre">CREATE</span> <span class="pre">TABLE</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/show-schemas.html"><code class="docutils literal"><span class="pre">SHOW</span> <span class="pre">SCHEMAS</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/show-tables.html"><code class="docutils literal"><span class="pre">SHOW</span> <span class="pre">TABLES</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sql/statements/update.html"><code class="docutils literal"><span class="pre">UPDATE</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../interfaces/index.html">Client Interfaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../interfaces/http.html">HTTP Endpoint</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../interfaces/http.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../interfaces/http.html#parameter-substitution">Parameter Substitution</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../interfaces/http.html#default-schema">Default Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../interfaces/http.html#column-types">Column Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../interfaces/http.html#bulk-operations">Bulk Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../interfaces/http.html#error-handling">Error Handling</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../interfaces/postgres.html">PostgreSQL Wire Protocol</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../interfaces/postgres.html#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../interfaces/postgres.html#server-compatibility-and-implementation-status">Server Compatibility and Implementation Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../interfaces/postgres.html#client-compatibility">Client Compatibility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../interfaces/postgres.html#implementation-differences">Implementation Differences</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../enterprise/index.html">Enterprise Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appendices/index.html">Appendices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../appendices/release-notes/index.html">Release Notes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../appendices/release-notes/index.html#x">2.x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendices/release-notes/index.html#id6">1.x</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../appendices/sql-compliance.html">Standard SQL Compliance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../appendices/sql-compliance.html#data-types">Data Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendices/sql-compliance.html#create-table">Create Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendices/sql-compliance.html#alter-table">Alter Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendices/sql-compliance.html#insert-update-and-delete">Insert, Update, and Delete</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendices/sql-compliance.html#system-information-tables">System Information Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendices/sql-compliance.html#blob-support">BLOB Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendices/sql-compliance.html#transactions-begin-commit-and-rollback">Transactions (<code class="docutils literal"><span class="pre">BEGIN</span></code>, <code class="docutils literal"><span class="pre">COMMIT</span></code>, and <code class="docutils literal"><span class="pre">ROLLBACK</span></code>)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../appendices/sql-compliance.html#unsupported-features-and-functions">Unsupported Features and Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../appendices/supported-features.html">Supported Features</a></li>
</ul>
</li>
</ul>

    </li>
    
    
    <li class="navleft-item"><a href="/docs/crate/guide">Guide</a></li>
    
  </ul>
  <li class="navleft-item">CrateDB Clients</li>
  <ul>
    
    <li class="navleft-item"><a href="/docs/clients/crash">The CrateDB Shell</a></li>
    
    
    <li class="navleft-item"><a href="/docs/clients/python">Python</a></li>
    
    
    <li class="navleft-item"><a href="/docs/clients/jdbc">JDBC</a></li>
    
    
    <li class="navleft-item"><a href="/docs/clients/dbal">PHP DBAL</a></li>
    
    
    <li class="navleft-item"><a href="/docs/clients/pdo">PHP PDO</a></li>
    
  </ul>

  <li class="navleft-item border-top"><a href="https://github.com/crate/crate-sample-apps">Sample Applications</a></li>
  <li class="navleft-item"><a href="/docs/support/">Support</a></li>
</ul>
    

    
      
      
    

    
    

    
      <li></li>
    

  </ul>
</div>
            
          </aside>
        </div>
        <div class="col-md-8 col-lg-9">
          <div class="wrapper-content-right">
            
  <div class="section" id="geo-search">
<span id="sql-dql-geo-search"></span><h1>Geo Search<a class="headerlink" href="#geo-search" title="Permalink to this headline">¶</a></h1>
<p class="rubric">Table of Contents</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id1">Introduction</a></li>
<li><a class="reference internal" href="#match-predicate" id="id2">Match Predicate</a></li>
<li><a class="reference internal" href="#exact-queries" id="id3">Exact Queries</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>CrateDB can be used to store and query geographical information of many kinds
using the <a class="reference internal" href="../ddl/data-types.html#geo-point-data-type"><span class="std std-ref">geo_point</span></a> and <a class="reference internal" href="../ddl/data-types.html#geo-shape-data-type"><span class="std std-ref">geo_shape</span></a> types. With
these it is possible to store geographical locations, ways, shapes, areas and
other entities. These can be queried for distance, containment, intersection
and so on, making it possible to create apps and services with rich
geographical features.</p>
<p><a class="reference internal" href="../ddl/data-types.html#geo-shape-data-type"><span class="std std-ref">Geographic shapes</span></a> are stored using special
indices. ref:<cite>Geographic points &lt;geo_point_data_type&gt;</cite> are represented by
their coordinates. They are represented as columns of the respective datatypes.</p>
<p>Geographic indices for <a class="reference internal" href="../ddl/data-types.html#geo-shape-data-type"><span class="std std-ref">geo_shape</span></a> columns are used
in order to speed up geographic searches even on complex shapes. This indexing
process results in a representation that is not exact (See <a class="reference internal" href="../ddl/data-types.html#geo-shape-data-type"><span class="std std-ref">geo_shape</span></a> for details). CrateDB does not operate on vector shapes
but on a kind of a grid with the given precision as resolution.</p>
<p>Creating tables containing geographic information is straightforward:</p>
<div class="highlight-psql"><div class="highlight"><pre><span></span><span class="n">cr</span><span class="o">&gt;</span> <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">country</span> <span class="p">(</span>
<span class="mf">...</span>   <span class="k">name</span> <span class="n">string</span><span class="p">,</span>
<span class="mf">...</span>   <span class="n">country_code</span> <span class="n">string</span> <span class="k">primary</span> <span class="k">key</span><span class="p">,</span>
<span class="mf">...</span>   <span class="n">shape</span> <span class="n">geo_shape</span> <span class="k">INDEX</span> <span class="k">USING</span> <span class="s s-Name">&quot;geohash&quot;</span> <span class="k">WITH</span> <span class="p">(</span><span class="k">precision</span><span class="o">=</span><span class="s1">&#39;100m&#39;</span><span class="p">),</span>
<span class="mf">...</span>   <span class="n">capital</span> <span class="n">string</span><span class="p">,</span>
<span class="mf">...</span>   <span class="n">capital_location</span> <span class="n">geo_point</span>
<span class="mf">...</span> <span class="p">)</span> <span class="k">WITH</span> <span class="p">(</span><span class="n">number_of_replicas</span><span class="o">=</span><span class="mf">0</span><span class="p">);</span>
<span class="go">CREATE OK, 1 row affected  (... sec)</span>
</pre></div>
</div>
<p>This table will contain the shape of a country and the location of its capital
alongside with other metadata. The shape is indexed with a maximum precision of
100 meters using a <code class="docutils literal"><span class="pre">geohash</span></code> index (For more information, see
<a class="reference internal" href="../ddl/data-types.html#geo-shape-data-type-index"><span class="std std-ref">Geo Shape Index Structure</span></a>).</p>
<p>Let&#8217;s insert Austria:</p>
<div class="highlight-psql"><div class="highlight"><pre><span></span><span class="n">cr</span><span class="o">&gt;</span> <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">country</span> <span class="p">(</span><span class="n">mame</span><span class="p">,</span> <span class="n">country_code</span><span class="p">,</span> <span class="n">shape</span><span class="p">,</span> <span class="n">capital</span><span class="p">,</span> <span class="n">capital_location</span><span class="p">)</span>
<span class="mf">...</span> <span class="k">VALUES</span> <span class="p">(</span>
<span class="mf">...</span>  <span class="s1">&#39;Austria&#39;</span><span class="p">,</span>
<span class="mf">...</span>  <span class="s1">&#39;at&#39;</span><span class="p">,</span>
<span class="mf">...</span>  <span class="p">{</span><span class="k">type</span><span class="o">=</span><span class="s1">&#39;Polygon&#39;</span><span class="p">,</span> <span class="n">coordinates</span><span class="o">=</span><span class="p">[</span>
<span class="mf">...</span>        <span class="p">[[</span><span class="mf">16.979667</span><span class="p">,</span> <span class="mf">48.123497</span><span class="p">],</span> <span class="p">[</span><span class="mf">16.903754</span><span class="p">,</span> <span class="mf">47.714866</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">16.340584</span><span class="p">,</span> <span class="mf">47.712902</span><span class="p">],</span> <span class="p">[</span><span class="mf">16.534268</span><span class="p">,</span> <span class="mf">47.496171</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">16.202298</span><span class="p">,</span> <span class="mf">46.852386</span><span class="p">],</span> <span class="p">[</span><span class="mf">16.011664</span><span class="p">,</span> <span class="mf">46.683611</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">15.137092</span><span class="p">,</span> <span class="mf">46.658703</span><span class="p">],</span> <span class="p">[</span><span class="mf">14.632472</span><span class="p">,</span> <span class="mf">46.431817</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">13.806475</span><span class="p">,</span> <span class="mf">46.509306</span><span class="p">],</span> <span class="p">[</span><span class="mf">12.376485</span><span class="p">,</span> <span class="mf">46.767559</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">12.153088</span><span class="p">,</span> <span class="mf">47.115393</span><span class="p">],</span> <span class="p">[</span><span class="mf">11.164828</span><span class="p">,</span> <span class="mf">46.941579</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">11.048556</span><span class="p">,</span> <span class="mf">46.751359</span><span class="p">],</span> <span class="p">[</span><span class="mf">10.442701</span><span class="p">,</span> <span class="mf">46.893546</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">9.932448</span><span class="p">,</span> <span class="mf">46.920728</span><span class="p">],</span> <span class="p">[</span><span class="mf">9.47997</span><span class="p">,</span> <span class="mf">47.10281</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">9.632932</span><span class="p">,</span> <span class="mf">47.347601</span><span class="p">],</span> <span class="p">[</span><span class="mf">9.594226</span><span class="p">,</span> <span class="mf">47.525058</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">9.896068</span><span class="p">,</span> <span class="mf">47.580197</span><span class="p">],</span> <span class="p">[</span><span class="mf">10.402084</span><span class="p">,</span> <span class="mf">47.302488</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">10.544504</span><span class="p">,</span> <span class="mf">47.566399</span><span class="p">],</span> <span class="p">[</span><span class="mf">11.426414</span><span class="p">,</span> <span class="mf">47.523766</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">12.141357</span><span class="p">,</span> <span class="mf">47.703083</span><span class="p">],</span> <span class="p">[</span><span class="mf">12.62076</span><span class="p">,</span> <span class="mf">47.672388</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">12.932627</span><span class="p">,</span> <span class="mf">47.467646</span><span class="p">],</span> <span class="p">[</span><span class="mf">13.025851</span><span class="p">,</span> <span class="mf">47.637584</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">12.884103</span><span class="p">,</span> <span class="mf">48.289146</span><span class="p">],</span> <span class="p">[</span><span class="mf">13.243357</span><span class="p">,</span> <span class="mf">48.416115</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">13.595946</span><span class="p">,</span> <span class="mf">48.877172</span><span class="p">],</span> <span class="p">[</span><span class="mf">14.338898</span><span class="p">,</span> <span class="mf">48.555305</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">14.901447</span><span class="p">,</span> <span class="mf">48.964402</span><span class="p">],</span> <span class="p">[</span><span class="mf">15.253416</span><span class="p">,</span> <span class="mf">49.039074</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">16.029647</span><span class="p">,</span> <span class="mf">48.733899</span><span class="p">],</span> <span class="p">[</span><span class="mf">16.499283</span><span class="p">,</span> <span class="mf">48.785808</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">16.960288</span><span class="p">,</span> <span class="mf">48.596982</span><span class="p">],</span> <span class="p">[</span><span class="mf">16.879983</span><span class="p">,</span> <span class="mf">48.470013</span><span class="p">],</span>
<span class="mf">...</span>        <span class="p">[</span><span class="mf">16.979667</span><span class="p">,</span> <span class="mf">48.123497</span><span class="p">]]</span>
<span class="mf">...</span>  <span class="p">]},</span>
<span class="mf">...</span>  <span class="s1">&#39;Vienna&#39;</span><span class="p">,</span>
<span class="mf">...</span>  <span class="p">[</span><span class="mf">16.372778</span><span class="p">,</span> <span class="mf">48.209206</span><span class="p">]</span>
<span class="mf">...</span> <span class="p">);</span>
<span class="go">INSERT OK, 1 row affected (... sec)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Geoshapes has to be fully valid by <a class="reference external" href="http://www.iso.org/iso/catalogue_detail.htm?csnumber=26012">ISO 19107</a>. If you have problems
importing geo data, they may not be fully valid. In most cases they could
be repaired using this tool: <a class="reference external" href="https://github.com/tudelft3d/prepair">https://github.com/tudelft3d/prepair</a></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When using a polygon shape that resembles a rectangle, and that rectangle
is wider than 180 degrees the CrateDB geoshape validator will convert it
into a multipolygon consisting of 2 rectangular shapes covering the
narrower area between the 4 original points split by the dateline (+/-
180deg).</p>
<p class="last">This is due to CrateDB operating in the geospatial context of the earth.</p>
</div>
<p><a class="reference internal" href="../ddl/data-types.html#geo-point-data-type"><span class="std std-ref">Geographic points</span></a> can be inserted as double array
with lon and lat as seen above or as <a class="reference external" href="http://en.wikipedia.org/wiki/Well-known_text">WKT</a> string.</p>
<p><a class="reference internal" href="../ddl/data-types.html#geo-shape-data-type"><span class="std std-ref">Geographic shapes</span></a> can be inserted as <a class="reference external" href="http://geojson.org/">GeoJSON</a>
<a class="reference internal" href="../ddl/data-types.html#data-type-object-literals"><span class="std std-ref">object literal</span></a> or parameter as seen above
and as <a class="reference external" href="http://en.wikipedia.org/wiki/Well-known_text">WKT</a> string.</p>
<p>When it comes to get some meaningful insights into your geographical data
CrateDB supports different kinds of geographic queries.</p>
<p>Fast queries that leverage the geographic index are done using the
<a class="reference internal" href="#sql-dql-geo-match"><span class="std std-ref">Match Predicate</span></a>:</p>
</div>
<div class="section" id="match-predicate">
<span id="sql-dql-geo-match"></span><h2><a class="toc-backref" href="#id2">Match Predicate</a><a class="headerlink" href="#match-predicate" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal"><span class="pre">MATCH</span></code> predicate can be used to perform multiple kinds of searches on
indices or indexed columns. While it can be used to perform
<a class="reference internal" href="fulltext.html#sql-dql-fulltext-search"><span class="std std-ref">fulltext searches</span></a> on analyzed indices of
type <a class="reference internal" href="../ddl/data-types.html#data-type-string"><span class="std std-ref">string</span></a>, it is also handy for operating on geographic
indices, querying for relations between geographical shapes and points.</p>
<div class="highlight-psql"><div class="highlight"><pre><span></span><span class="k">MATCH</span> <span class="p">(</span><span class="n">column_ident</span><span class="p">,</span> <span class="n">query_term</span><span class="p">)</span> <span class="p">[</span> <span class="k">using</span> <span class="n">match_type</span> <span class="p">]</span>
</pre></div>
</div>
<p>The Match predicate for geographical search supports a single <code class="docutils literal"><span class="pre">column_ident</span></code>
of a geo_shape indexed column as first argument.</p>
<p>The second argument, the <code class="docutils literal"><span class="pre">query_term</span></code> is taken to match against the indexed
geo_shape.</p>
<p>The matching operation is determined by the <code class="docutils literal"><span class="pre">match_type</span></code> which determines the
spatial relation we want to match. Available <code class="docutils literal"><span class="pre">match_types</span></code> are:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">intersects:</th><td class="field-body">(Default) If the two shapes share some points and/or area, they
are intersecting and considered matching using this
<code class="docutils literal"><span class="pre">match_type</span></code>. This also precludes containment or complete
equality.</td>
</tr>
<tr class="field-even field"><th class="field-name">disjoint:</th><td class="field-body">If the two shapes share no single point and not area, they are
disjoint. This is the opposite of <code class="docutils literal"><span class="pre">intersects</span></code>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">within:</th><td class="field-body">If the indexed <code class="docutils literal"><span class="pre">column_ident</span></code> shape is completely inside the
<code class="docutils literal"><span class="pre">query_term</span></code> shape they are considered matching using this
<code class="docutils literal"><span class="pre">match_type</span></code>.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">MATCH</span></code> predicate can only be used in the <a class="reference internal" href="selects.html#sql-dql-where-clause"><span class="std std-ref">WHERE Clause</span></a>
and on user-created tables. Using the <code class="docutils literal"><span class="pre">MATCH</span></code> predicate on system tables
is not supported.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">One MATCH predicate cannot combine columns of both relations of a join.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>MATCH predicates cannot be used on columns of both relations of a join if
they cannot be logically applied to each of them separately. For example:</p>
<p>This is allowed: <code class="docutils literal"><span class="pre">FROM</span> <span class="pre">t1,</span> <span class="pre">t2</span> <span class="pre">WHERE</span> <span class="pre">match(t1.shape,</span> <span class="pre">'POINT(1.1</span> <span class="pre">2.2)')</span> <span class="pre">AND</span>
<span class="pre">match(t2.shape,</span> <span class="pre">'POINT(3.3</span> <span class="pre">4.4)')</span></code></p>
<p class="last">But this is not: <code class="docutils literal"><span class="pre">FROM</span> <span class="pre">t1,</span> <span class="pre">t2</span> <span class="pre">WHERE</span> <span class="pre">match(t1.shape,</span> <span class="pre">'POINT(1.1</span> <span class="pre">2.2)')</span> <span class="pre">OR</span>
<span class="pre">match(t2.shape,</span> <span class="pre">'POINT(3.3</span> <span class="pre">4.4)')</span></code></p>
</div>
<p>Having a table <code class="docutils literal"><span class="pre">countries</span></code> with a <code class="docutils literal"><span class="pre">GEO_SHAPE</span></code> column &#8220;geo&#8221; indexed using
<code class="docutils literal"><span class="pre">geohash</span></code> you can query that column using the <code class="docutils literal"><span class="pre">MATCH</span></code> predicate with
different match types as described above:</p>
<div class="highlight-psql"><div class="highlight"><pre><span></span><span class="n">cr</span><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">name</span> <span class="k">from</span> <span class="n">countries</span>
<span class="mf">...</span> <span class="k">WHERE</span> <span class="k">match</span><span class="p">(</span><span class="s s-Name">&quot;geo&quot;</span><span class="p">,</span>
<span class="mf">...</span>   <span class="s1">&#39;LINESTRING (13.3813 52.5229, 11.1840 51.5497, 8.6132 50.0782, 8.3715 47.9457, 8.5034 47.3685)&#39;</span>
<span class="mf">...</span> <span class="p">);</span>
<span class="go">+---------+</span>
<span class="go">| name    |</span>
<span class="go">+---------+</span>
<span class="go">| Germany |</span>
<span class="go">+---------+</span>
<span class="go">SELECT 1 row in set (... sec)</span>
</pre></div>
</div>
<div class="highlight-psql"><div class="highlight"><pre><span></span><span class="n">cr</span><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">name</span> <span class="k">from</span> <span class="n">countries</span>
<span class="mf">...</span> <span class="k">WHERE</span> <span class="k">match</span><span class="p">(</span><span class="s s-Name">&quot;geo&quot;</span><span class="p">,</span>
<span class="mf">...</span>   <span class="s1">&#39;LINESTRING (13.3813 52.5229, 11.1840 51.5497, 8.6132 50.0782, 8.3715 47.9457, 8.5034 47.3685)&#39;</span>
<span class="mf">...</span> <span class="p">)</span> <span class="k">USING</span> <span class="n">disjoint</span>
<span class="mf">...</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="k">name</span><span class="p">;</span>
<span class="go">+--------------+</span>
<span class="go">| name         |</span>
<span class="go">+--------------+</span>
<span class="go">| Austria      |</span>
<span class="go">| France       |</span>
<span class="go">| South Africa |</span>
<span class="go">| Turkey       |</span>
<span class="go">+--------------+</span>
<span class="go">SELECT 4 rows in set (... sec)</span>
</pre></div>
</div>
</div>
<div class="section" id="exact-queries">
<h2><a class="toc-backref" href="#id3">Exact Queries</a><a class="headerlink" href="#exact-queries" title="Permalink to this headline">¶</a></h2>
<p><em>Exact</em> queries are done using the following scalar functions:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="../builtins/scalar.html#scalar-intersects"><span class="std std-ref">intersects(geo_shape, geo_shape)</span></a></li>
<li><a class="reference internal" href="../builtins/scalar.html#scalar-within"><span class="std std-ref">within(shape1, shape2)</span></a></li>
<li><a class="reference internal" href="../builtins/scalar.html#scalar-distance"><span class="std std-ref">distance(geo_point1, geo_point2)</span></a></li>
</ul>
</div></blockquote>
<p>They are exact, but this comes at the price of performance.</p>
<p>They do not make use of the index but work on the <a class="reference external" href="http://geojson.org/">GeoJSON</a> that was inserted
to compute the shape vector. This access is quite expensive and may
significantly slow down your queries.</p>
<p>For fast querying, use the <a class="reference internal" href="#sql-dql-geo-match"><span class="std std-ref">Match Predicate</span></a>.</p>
<p>But executed on a limited result set, they will help you get precise insights
into your geographic data:</p>
<div class="highlight-psql"><div class="highlight"><pre><span></span><span class="n">cr</span><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="k">within</span><span class="p">(</span><span class="n">capital_location</span><span class="p">,</span> <span class="n">shape</span><span class="p">)</span> <span class="k">AS</span> <span class="n">capital_in_country</span>
<span class="mf">...</span> <span class="k">FROM</span> <span class="n">country</span><span class="p">;</span>
<span class="go">+--------------------+</span>
<span class="go">| capital_in_country |</span>
<span class="go">+--------------------+</span>
<span class="go">| TRUE               |</span>
<span class="go">+--------------------+</span>
<span class="go">SELECT 1 row in set (... sec)</span>
</pre></div>
</div>
<div class="highlight-psql"><div class="highlight"><pre><span></span><span class="n">cr</span><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">distance</span><span class="p">(</span><span class="n">capital_location</span><span class="p">,</span> <span class="s1">&#39;POINT(0.0 90.0)&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">from_northpole</span>
<span class="mf">...</span> <span class="k">FROM</span> <span class="n">country</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">country_code</span><span class="p">;</span>
<span class="go">+--------------------+</span>
<span class="go">|     from_northpole |</span>
<span class="go">+--------------------+</span>
<span class="go">| 4646930.6709925765 |</span>
<span class="go">+--------------------+</span>
<span class="go">SELECT 1 row in set (... sec)</span>
</pre></div>
</div>
<div class="highlight-psql"><div class="highlight"><pre><span></span><span class="n">cr</span><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">intersects</span><span class="p">(</span>
<span class="mf">...</span>   <span class="p">{</span><span class="k">type</span><span class="o">=</span><span class="s1">&#39;LineString&#39;</span><span class="p">,</span> <span class="n">coordinates</span><span class="o">=</span><span class="p">[[</span><span class="mf">13.3813</span><span class="p">,</span> <span class="mf">52.5229</span><span class="p">],</span>
<span class="mf">...</span>                                    <span class="p">[</span><span class="mf">11.1840</span><span class="p">,</span> <span class="mf">51.5497</span><span class="p">],</span>
<span class="mf">...</span>                                    <span class="p">[</span><span class="mf">8.6132</span><span class="p">,</span>  <span class="mf">50.0782</span><span class="p">],</span>
<span class="mf">...</span>                                    <span class="p">[</span><span class="mf">8.3715</span><span class="p">,</span>  <span class="mf">47.9457</span><span class="p">],</span>
<span class="mf">...</span>                                    <span class="p">[</span><span class="mf">8.5034</span><span class="p">,</span>  <span class="mf">47.3685</span><span class="p">]]},</span>
<span class="mf">...</span>   <span class="n">shape</span><span class="p">)</span> <span class="k">as</span> <span class="n">berlin_zurich_intersects</span>
<span class="mf">...</span> <span class="k">FROM</span> <span class="n">country</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">country_code</span><span class="p">;</span>
<span class="go">+--------------------------+</span>
<span class="go">| berlin_zurich_intersects |</span>
<span class="go">+--------------------------+</span>
<span class="go">| FALSE                    |</span>
<span class="go">+--------------------------+</span>
<span class="go">SELECT 1 row in set (... sec)</span>
</pre></div>
</div>
<p>Nonetheless these scalars can be used everywhere in a SQL query where scalar
functions are allowed.</p>
</div>
</div>


          </div>
        </div>
      </div>
    </div>
  </div><footer class="footer">
  <div class="w-container">
    <div class="w-clearfix">
      <div class="w-row mobileAlign">
        <div class="w-col w-col-3 footer-menu">
          <p class="menu-Label">Product</p>
          <ul class="vertical-menu">
            <li class="footer-listitem-new"><a href="https://crate.io/overview/">Overview</a></li>
            <li class="footer-listitem-new"><a href="https://crate.io/download/">Download</a></li>
            <li class="footer-listitem-new"><a href="https://crate.io/use-cases/">Use Cases</a></li>
            <li class="footer-listitem-new"><a href="https://crate.io/customers/">Customers</a></li>
            <li class="footer-listitem-new"><a href="https://crate.io/pricing/">Pricing</a></li>
          </ul>
        </div>
        <div class="w-col w-col-3 footer-menu">
          <p class="menu-Label">Resources</p>
          <ul class="vertical-menu">
            <li class="footer-listitem-new"><a href="https://crate.io/resources/">Resource Library</a></li>
            <li class="footer-listitem-new"><a href="https://crate.io/docs/">Documentation</a></li>
            <li class="footer-listitem-new"><a href="https://crate.io/docs/support/">Support</a></li>
            <li class="footer-listitem-new"><a href="https://crate.io/events/">Events</a></li>
            <li class="footer-listitem-new"><a href="https://crate.io/blog/">Blog</a></li>
          </ul>
        </div>
        <div class="w-col w-col-3 footer-menu">
          <p class="menu-Label">Company</p>
          <ul class="vertical-menu">
            <li class="footer-listitem-new "><a href="https://crate.io/about/">About</a></li>
            <li class="footer-listitem-new"><a href="https://crate.io/jobs/">Jobs</a></li>
            <li class="footer-listitem-new "><a href="https://crate.io/partners/">Partners</a></li>
            <li class="footer-listitem-new"><a href="https://crate.io/in-the-news/">In the News</a></li>
          </ul>
        </div>
        <div class="w-col w-col-3">
          <ul class="footer-list w-list-unstyled" style="margin-top: 0; padding-left: 0;">
            <li class="footer-listitem">
              <a class="footer-link-connect w-inline-block" href="https://www.facebook.com/crate.io" target="_blank" style="padding-left: 0;">
                <img src="../../_static/images/f-logo-facebook.png" width="12">
              </a>
            </li>
            <li class="footer-listitem">
              <a class="footer-link-connect w-inline-block" href="https://twitter.com/Crateio" target="_blank">
                <img src="../../_static/images/f-logo-twitter.png" width="23">
              </a>
            </li>
            <li class="footer-listitem">
              <a class="footer-link-connect w-inline-block" href="https://plus.google.com/105753392254543335997" target="_blank">
                <img src="../../_static/images/f-logo-google.png" width="23">
              </a>
            </li>
            <li class="footer-listitem">
              <a class="footer-link-connect w-inline-block" href="https://www.linkedin.com/company/crateio" target="_blank">
                <img src="../../_static/images/f-logo-linkedin.png" width="22">
              </a>
            </li>
            <li class="footer-listitem">
              <a class="footer-link-connect w-inline-block" href="https://www.youtube.com/channel/UCcp_IqjXaejmwBcwg51n1AA" target="_blank">
                <img src="../../_static/images/f-logo-youtube.png" width="24">
              </a>
            </li>
            <li class="footer-listitem">
              <a class="footer-link-connect w-inline-block" href="https://github.com/crate">
                <img src="../../_static/images/f-logo-github.png" width="22">
              </a>
            </li>
            <div class="mobileHoriztonalMenu">
              <li class="footer-listitem-new"><a href="https://crate.io/contact/">Contact</a></li>
              <li class="footer-listitem-new"><a href="https://crate.io/legal/">Legal</a></li>
              <li class="footer-listitem-new"><a href="https://crate.io/legal/imprint/">Imprint</a></li>
            </div>
            <li class="footer-listitem link-list">
              <a class="footer-link-eu w-inline-block" href="/erdf/">
                <img class="logo-eu" sizes="100px" src="../../_static/images/logo-eu-optimized-1.jpg" width="101">
              </a>
            </li>
          </ul>
        </div>
      </div>
      <div class="w-row">
        <a class="brand footer-brand w-inline-block" href="/">
          <img src="../../_static/images/logo-crate.png" width="217">
        </a>
      </div>
    </div>
  </div>
</footer>

  <script>
  var $navAffix = $('#nav-affix');
  var $contentEl = $('.wrapper-content-right');
  // Desktop only
  if( !$('#mobile-menu-toggler').is(':visible') ) {

    // Only if the content is taller than the sidebar,
    // to avoid scroll jerk
    if ( $contentEl.height() > $navAffix.height() ) {
      // Init
      $navAffix.affix({
        offset: {
          top: 100,
          bottom: function () {
            return (this.bottom = $('footer').outerHeight(true) + 200)
          }
        }
      });
      // Recalculate the sidebar
      $(window).resize(function() {
        $navAffix.affix('checkPosition');
      });
    }

    $('body').scrollspy();

  } else {

    $('.wrapper-navleft').hide();
    $('#mobile-menu-toggler').click(function() {
      $('.wrapper-navleft').toggle();
    });

  }

  $(document).ready(function() {
    window.setTimeout(function() {$('body').append('<a href="https://crate.io/docs/support/slackin/" style="z-index: 10; position: fixed; bottom: 20px; right: ' + ($('#intercom-launcher').is(':visible') ? '90' : '20') + 'px; box-shadow: 0 6px 13px 0 rgba(0, 0, 0, .23)"><img src="../../_static/images/slack.png" id="slack-container" /></a>'); }, 2000);
  });
  </script>

  <!-- Segment -->
  <script>
    !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","setAnonymousId"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="4.0.0";
      analytics.load("FToR4cE5lXyQziQirvt0kSnFQj0rAgu9");
      analytics.setAnonymousId($.cookie('uid'));
      analytics.page();
      analytics.track('visited_section_docs', {
        project: 'crate',
        version: ''
      });
    }}();
  </script>
  </body>
</html>