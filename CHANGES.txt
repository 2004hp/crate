==================
Unreleased Changes
==================

This file collects *unreleased* changes only.

For release notes, see:

  https://crate.io/docs/reference/en/latest/release_notes/index.html

For developers: changes should be recorded here (using RST syntax) as you are
developing CrateDB. When a new release is being cut, changes will be moved to
the appropriate section of the docs.

Breaking Changes
================

Changes
=======

- Added cluster checks that warn if some tables need to be recreated so that
  they are compatible with future versions of CrateDB >= 3.0.0.

Fixes
=====

 - Fixed an issue that resulted in aliases overriding column names when a
   subselect is used and a column appears in the outer SELECT multiple times,
   without an alias and with alias or with multiple aliases. E.g.::

     SELECT a, a AS newcol FROM (SELECT a FROM t WHERE a > 1)
     SELECT a AS newcol1, a AS newcol2 FROM (SELECT a FROM t WHERE a > 1)

 - Fixed an issue that caused ``INSERT`` statements using a subquery on the
   `sys.shards` system table to fail.

 - Update position of the navigation menu elements of the Admin UI.

 - Fixed left Join condition in shards query that previously caused
   duplicated shards to be displayed in the shards visualisation
   of the Admin UI.

 - Added loading indicator in shards view in the Admin UI.

 - Do not automatically execute the query when clicking on
   the "Query Table" button in the table view of the Admin UI.

 - Fixed race condition in COPY FROM that could display incorrect row count
   when inserting into table partition that does not exist upfront.

 - Fixed a bug that caused incorrect results to be returned for JOIN queries
   when the table stats indicated that the left table of a join is smaller
   than the right.

 - Fixed passing arguments that contain spaces in crate shell script.

 - Fixed an issue that caused a table that is not part of the "doc" schema to
   be unavailable/hidden if it gets closed using ``ALTER TABLE``.

 - Fixed an issue where the query circuit breaker would be tripped after
   running several queries due to incorrect memory tracking. Subsequent
   operations would've failed due to the lack of circuit breaker cleanup.

 - Improve shards view performance in the Admin UI

 - Remove horizontal scroll from the console editor in the Admin UI.
